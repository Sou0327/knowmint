const JA_TO_EN_EXACT: Record<string, string> = {
  // Header / nav
  "マーケット": "Market",
  "出品する": "List Item",
  "マイライブラリ": "My Library",
  "ダッシュボード": "Dashboard",
  "検索...": "Search...",
  "ユーザーメニュー": "User menu",
  "ログイン": "Log In",
  "サインアップ": "Sign Up",
  "メニューを閉じる": "Close menu",
  "メニューを開く": "Open menu",

  // Footer
  "AIと人間のための知識マーケットプレイス": "A knowledge marketplace for AI and humans",
  "プラットフォーム": "Platform",
  "カテゴリ": "Categories",
  "サポート": "Support",
  "ヘルプ（準備中）": "Help (Coming soon)",
  "利用規約（準備中）": "Terms (Coming soon)",
  "プライバシーポリシー（準備中）": "Privacy Policy (Coming soon)",

  // Auth
  "新規登録": "Sign Up",
  "Knowledge Market アカウントを作成": "Create your Knowledge Market account",
  "確認メールを送信しました": "Confirmation email sent",
  "メールに記載されたリンクをクリックして、アカウントを有効化してください。":
    "Click the link in the email to activate your account.",
  "ログインページへ": "Go to login",
  "表示名": "Display Name",
  "メールアドレス": "Email",
  "パスワード": "Password",
  "パスワード（確認）": "Confirm Password",
  "8文字以上": "At least 8 characters",
  "アカウント作成": "Create Account",
  "すでにアカウントをお持ちの方は": "Already have an account?",
  "Knowledge Market にログイン": "Log in to Knowledge Market",
  "アカウントをお持ちでない方は": "Don't have an account?",
  "パスワードが一致しません": "Passwords do not match",
  "パスワードは8文字以上で入力してください": "Password must be at least 8 characters",

  // Home
  "AIエージェントと人間のための知識マーケットプレイス。":
    "A knowledge marketplace for AI agents and humans.",
  "プロンプト、ツール定義、データセット、APIを売買できます。":
    "Buy and sell prompts, tool definitions, datasets, and APIs.",
  "AIエージェントと人間のための知識マーケットプレイス。 プロンプト、ツール定義、データセット、APIを売買できます。":
    "A knowledge marketplace for AI agents and humans. Buy and sell prompts, tool definitions, datasets, and APIs.",
  "マーケットを探す": "Explore Market",
  "あなたへのおすすめ": "Recommended for You",
  "新着": "New",
  "人気": "Popular",
  "すべて見る": "View All",
  "まだアイテムがありません": "No items yet",
  "人気の出品者": "Top Sellers",
  "ランキングを見る": "View Rankings",

  // Search / category
  "マーケット検索": "Search Market",
  "すべて": "All",
  "コンテンツタイプ": "Content Type",
  "結果が見つかりませんでした": "No results found",
  "前へ": "Previous",
  "次へ": "Next",
  "← トップ": "← Top",
  "このカテゴリにはまだアイテムがありません": "No items in this category yet",

  // Knowledge detail / purchase
  "マーケットに戻る": "Back to Market",
  "説明": "Description",
  "プレビュー": "Preview",
  "レビュー": "Reviews",
  "購入する": "Buy",
  "ウォレット接続が必要です": "Wallet connection required",
  "関連アイテム": "Related Items",
  "購入確認": "Confirm Purchase",
  "購入アイテム": "Item",
  "支払い通貨": "Payment token",
  "キャンセル": "Cancel",
  "ウォレットを接続": "Connect Wallet",
  "価格情報または出品者のウォレットアドレスが不足しています":
    "Price or seller wallet address is missing",
  "USDC決済は現在準備中です": "USDC payment is not available yet",
  "EVMウォレットを接続してください": "Please connect an EVM wallet",
  "決済に失敗しました": "Payment failed",

  // Wallet / follow / favorite
  "ウォレット接続": "Connect Wallet",
  "切断": "Disconnect",
  "フォローする": "Follow",
  "フォロー中": "Following",
  "フォローを解除": "Unfollow",
  "お気に入りに追加": "Add to favorites",
  "お気に入りから削除": "Remove from favorites",

  // Library / rankings / notifications / favorites
  "購入した知識はまだありません": "You have not purchased any knowledge yet",
  "匿名": "Anonymous",
  "出品者ランキング": "Seller Rankings",
  "販売実績の多い出品者をランキング表示しています":
    "Top sellers ranked by sales performance",
  "まだランキングデータがありません": "No ranking data yet",
  "通知": "Notifications",
  "通知はありません": "No notifications",
  "読み込み中...": "Loading...",
  "既読にする": "Mark as read",
  "お気に入り": "Favorites",
  "お気に入りがありません": "No favorites yet",
  "気になるナレッジをお気に入りに追加してみましょう":
    "Add interesting knowledge items to your favorites",
  "マーケットを見る": "View Market",

  // Dashboard
  "概要": "Overview",
  "出品管理": "Listings",
  "売上分析": "Sales Analytics",
  "購入履歴": "Purchase History",
  "ランキング": "Rankings",
  "APIキー": "API Keys",
  "設定": "Settings",
  "チャート読み込み中...": "Loading chart...",
  "7日": "7 days",
  "30日": "30 days",
  "90日": "90 days",
  "全期間": "All time",
  "期間選択": "Period",
  "日別売上推移": "Daily Sales Trend",
  "売上上位アイテム": "Top Selling Items",
  "収益": "Revenue",
  "データがありません": "No data available",
  "タイトル": "Title",
  "アイテム": "Item",
  "金額": "Amount",
  "チェーン": "Chain",
  "ステータス": "Status",
  "日時": "Date",
  "販売数": "Sales",
  "評価": "Rating",
  "新規出品": "New Listing",
  "出品数": "Listings",
  "公開中": "Published",
  "下書き": "Draft",
  "売上 (SOL)": "Sales (SOL)",
  "売上 (USDC)": "Sales (USDC)",
  "過去30日": "Last 30 days",
  "最近の取引": "Recent Transactions",
  "まだ取引がありません": "No transactions yet",
  "不明なアイテム": "Unknown item",
  "クイックアクション": "Quick Actions",
  "APIキー管理": "API Key Management",
  "この期間のデータはありません": "No data for this period",
  "公開": "Publish",
  "削除": "Delete",
  "削除する": "Delete",
  "まだ購入履歴がありません": "No purchase history yet",
  "削除されたアイテム": "Deleted item",
  "まだ出品がありません": "No listings yet",
  "最初の知識を出品する": "List your first knowledge item",
  "マーケットを見る →": "View Market →",

  // API key manager
  "読み取り": "Read",
  "ナレッジ検索・取得": "Read/search knowledge",
  "書き込み": "Write",
  "ナレッジ作成・更新": "Create/update knowledge",
  "管理者": "Admin",
  "全権限": "All permissions",
  "APIキーが作成されました。このキーは一度だけ表示されます。":
    "API key created. This key is shown only once.",
  "コピー済み": "Copied",
  "コピー": "Copy",
  "閉じる": "Close",
  "新しいAPIキーを作成": "Create New API Key",
  "キー名": "Key Name",
  "例: 本番環境用": "e.g. Production",
  "権限": "Permissions",
  "作成": "Create",
  "APIキーがありません": "No API keys",
  "作成:": "Created:",
  "最終使用:": "Last used:",
  "有効期限:": "Expires:",
  "APIキーの取得に失敗しました": "Failed to fetch API keys",
  "APIキーの作成に失敗しました": "Failed to create API key",
  "APIキーの削除に失敗しました": "Failed to delete API key",
  "APIキーの使い方": "How to use API keys",
  "APIキーを使用して、Knowledge Market API にプログラムからアクセスできます。":
    "Use API keys to access Knowledge Market API programmatically.",
  "APIキーは安全に管理してください。キーが漏洩した場合は直ちに削除し、新しいキーを作成してください。":
    "Keep API keys secure. If leaked, delete and rotate them immediately.",
  "APIキーの削除": "Delete API Key",
  "を削除しますか？この操作は取り消せません。":
    "Delete this key? This action cannot be undone.",

  // Listing flow
  "基本情報": "Basic Info",
  "コンテンツ": "Content",
  "価格設定": "Pricing",
  "確認・公開": "Review & Publish",
  "タイトルは必須です": "Title is required",
  "説明は必須です": "Description is required",
  "少なくとも1つの価格を設定してください": "Set at least one price",
  "知識を出品する": "List Knowledge",
  "あなたの知識やノウハウをマーケットに出品しましょう":
    "List your knowledge and know-how on the market",
  "戻る": "Back",
  "下書き保存": "Save Draft",
  "公開する": "Publish",
  "カテゴリを選択": "Select category",
  "知識のタイトルを入力": "Enter knowledge title",
  "この知識の概要を説明してください": "Describe this knowledge",
  "タグ": "Tags",
  "カンマ区切りで入力（例: AI, プロンプト, ChatGPT）":
    "Comma-separated (e.g. AI, prompt, ChatGPT)",
  "価格 (SOL)": "Price (SOL)",
  "Solana (SOL) での価格": "Price in Solana (SOL)",
  "価格 (USDC)": "Price (USDC)",
  "USDC での価格": "Price in USDC",
  "カンマ区切りで入力（例: 業務改善, テンプレート, 初心者向け）":
    "Comma-separated (e.g. process improvement, template, beginner-friendly)",
  "SOLまたはUSDC（もしくは両方）の価格を設定してください。少なくとも1つは必須です。":
    "Set a SOL and/or USDC price. At least one is required.",
  "内容の概要や活用シーンを記載...": "Summarize the content and use cases...",
  "本文・手順・解説などを入力...":
    "Enter the main content, steps, explanations, and more...",
  "テンプレートや設定ファイルの概要...":
    "Summarize the template or configuration file...",
  "テンプレート内容、設定値、利用手順を入力...":
    "Enter template content, config values, and usage steps...",
  "データ/資料の概要とサンプル...":
    "Summarize the data/material and include a sample...",
  "データの項目説明、取得方法、利用条件など...":
    "Describe fields, acquisition method, usage terms, etc...",
  "外部リソースや参照先の概要...":
    "Summarize external resources and references...",
  "URL、参照手順、必要な情報など...":
    "Provide URL, how to use it, and required information...",
  "詳細なナレッジ内容を入力...": "Enter detailed knowledge content...",
  "プレビューコンテンツ": "Preview Content",
  "購入前に公開される内容です。興味を引く概要を記載してください。":
    "Shown before purchase. Write an engaging preview.",
  "フルコンテンツ": "Full Content",
  "購入後に閲覧できるコンテンツです。": "Shown after purchase.",
  "出品内容を確認してください。問題なければ公開できます。":
    "Review your listing. Publish when ready.",
  "タイトル未設定": "No title",
  "説明未設定": "No description",
  "プレビュー未設定": "No preview",
  "価格": "Price",

  // Misc
  "出品者": "Seller",
  "匿名ユーザー": "Anonymous User",
  "保存": "Save",
  "プロフィール設定": "Profile Settings",
  "プロフィール写真": "Profile Photo",
  "自己紹介": "Bio",
  "マークダウンが使えます": "Markdown supported",
  "ウォレットアドレス (Solana)": "Wallet Address (Solana)",
  "売上の受取先アドレス": "Address to receive sales",
  "プロフィールを更新しました": "Profile updated",
  "プロフィール": "Profile",
  "テキスト・記事": "Text / Article",
  "テンプレート・設定": "Template / Configuration",
  "データ・資料": "Data / Material",
  "リンク・外部リソース": "Link / External Resource",
  "その他ナレッジ": "Other Knowledge",
  "ビジネス・仕事": "Business / Work",
  "テクノロジー・IT": "Technology / IT",
  "デザイン・クリエイティブ": "Design / Creative",
  "学習・教育": "Learning / Education",
  "ライフスタイル": "Lifestyle",
  "プロンプト": "Prompt",
  "ツール定義 / MCP": "Tool Definition / MCP",
  "データセット": "Dataset",
  "APIエンドポイント": "API Endpoint",
  "汎用ナレッジ": "General Knowledge",
  "アーカイブ": "Archived",
  "停止中": "Suspended",
  "ログアウト": "Log Out",
  "ユーザー": "User",
  "アクセス権限がありません": "Access denied",
  "プレビューはありません": "No preview available",
  "まだレビューはありません": "No reviews yet",
  "レビューを投稿": "Submit Review",
  "レビューを投稿しました": "Review submitted",
  "JSON / ツール定義": "JSON / Tool Definition",
  "JSON / テンプレート設定": "JSON / Template Settings",
  "外部リソース情報": "External Resource Info",
  "APIスキーマ": "API Schema",
  "モーダルを閉じる": "Close modal",
  "読み込み中": "Loading",
  "Knowledge Market - 知識売買マーケットプレイス":
    "Knowledge Market - Knowledge Marketplace",
  "専門知識・ノウハウを売買できるプラットフォーム":
    "A platform to buy and sell expertise and know-how",
  "このコンテンツを閲覧するには購入が必要です。":
    "You need to purchase this content to view it.",
  "詳細ページへ →": "Go to details →",
  "← ライブラリに戻る": "← Back to library",
  "ファイルをダウンロード": "Download file",
  "コンテンツがありません": "No content available",
  "カテゴリナビゲーション": "Category navigation",
  "知識を検索...": "Search knowledge...",
  "コメント（任意）": "Comment (optional)",
  "この知識についてのコメント...": "Comments about this knowledge...",
  "評価順": "Top rated",
  "人気順": "Most popular",
  "新着順": "Newest",
  "価格: 低い順": "Price: Low to High",
  "価格: 高い順": "Price: High to Low",
  "APIの概要とエンドポイント一覧...": "API summary and endpoint list...",
  "APIのURL、認証方法、スキーマ情報...":
    "API URL, authentication method, and schema information...",
  "プロンプトの概要や使い方を記載...": "Write prompt overview and usage...",
  "完全なプロンプトテキストを入力...": "Enter full prompt text...",
  "ツールの概要と使用例...": "Tool summary and examples...",
  "JSON/YAML形式のツール定義を入力...": "Enter tool definition in JSON/YAML...",
  "データセットの概要とサンプルデータ...": "Dataset summary and sample data...",
  "データセットの詳細情報（ファイルアップロードは別途対応）":
    "Dataset details (file upload supported separately)",
  "ナレッジの概要やポイント...": "Knowledge summary and key points...",
  "完全なナレッジコンテンツ（Markdown対応）...":
    "Full knowledge content (Markdown supported)...",
  "この出品を削除しますか？": "Delete this listing?",
  "処理中": "Processing",
  "失敗": "Failed",
  "完了": "Completed",
  "新しい購入がありました": "New purchase received",
  "新しいレビューが投稿されました": "New review posted",
  "新しいフォロワー": "New follower",
  "フォロー中の出品者が新規出品": "A seller you follow listed a new item",
  "入力が不正です": "Invalid input",
  "入力が不正です: ": "Invalid input: ",
  "タイトルは200文字以内": "Title must be within 200 characters",
  "説明は5000文字以内": "Description must be within 5000 characters",
  "価格を設定してください": "Please set a price",
  "タイトルと説明は必須です": "Title and description are required",
  "アイテムが見つかりません": "Item not found",
  "自分のアイテムは購入できません": "You cannot purchase your own item",
  "このトークンでの価格が設定されていません":
    "Price is not configured for this token",
  "このトランザクションは既に記録されています":
    "This transaction is already recorded",
  "トランザクション確認に失敗しました": "Failed to confirm transaction",
  "トランザクション検証に失敗しました": "Failed to verify transaction",
  "トランザクションが見つかりません": "Transaction not found",
  "トランザクションが失敗しています": "Transaction failed",
  "送信者が一致しません": "Sender mismatch",
  "受取人がトランザクションに含まれていません":
    "Recipient is not included in the transaction",
  "購入済みのアイテムのみレビューできます":
    "Only purchased items can be reviewed",
  "既にレビュー済みです": "Already reviewed",
  "購入者": "Buyer",
  "Supabaseの環境変数が未設定です。.env.localを確認してください。":
    "Supabase environment variables are not set. Check .env.local.",
  "Supabaseの接続設定がサンプル値のままです。.env.localに実際のProject URLとanon keyを設定してください。":
    "Supabase settings are still placeholders. Set actual Project URL and anon key in .env.local.",
};

type PatternRule = {
  regex: RegExp;
  replace: (...args: string[]) => string;
};

const PATTERN_RULES: PatternRule[] = [
  { regex: /^([0-9][0-9,]*)\s*件の結果$/, replace: (n) => `${n} results` },
  { regex: /^([0-9][0-9,]*)\s*件のアイテム$/, replace: (n) => `${n} items` },
  { regex: /^([0-9][0-9,]*)\s*件の取引$/, replace: (n) => `${n} transactions` },
  { regex: /^([0-9][0-9,]*)\s*購入$/, replace: (n) => `${n} purchases` },
  { regex: /^([0-9][0-9,]*)\s*閲覧$/, replace: (n) => `${n} views` },
  { regex: /^([0-9][0-9,]*)\s*販売$/, replace: (n) => `${n} sales` },
  { regex: /^([0-9][0-9,]*)\s*アイテム$/, replace: (n) => `${n} items` },
  { regex: /^([0-9][0-9,]*)\s*フォロワー$/, replace: (n) => `${n} followers` },
  { regex: /^(\d+)分前$/, replace: (n) => `${n}m ago` },
  { regex: /^(\d+)時間前$/, replace: (n) => `${n}h ago` },
  { regex: /^(\d+)日前$/, replace: (n) => `${n}d ago` },
  { regex: /^(.+)の一覧$/, replace: (title) => `${JA_TO_EN_EXACT[title] ?? title} list` },
  { regex: /^公開中:\s*([0-9][0-9,]*)$/, replace: (n) => `Published: ${n}` },
  { regex: /^下書き:\s*([0-9][0-9,]*)$/, replace: (n) => `Draft: ${n}` },
  { regex: /^(.+)\s・\s(.+)$/, replace: (a, b) => `${a} · ${b}` },
  {
    regex: /^(\d{4})年(\d{1,2})月(\d{1,2})日\s*(\d{1,2}):(\d{2})$/,
    replace: (y, m, d, h, min) => `${m}/${d}/${y} ${h.padStart(2, "0")}:${min}`,
  },
  { regex: /^(.+)\sを削除しますか？この操作は取り消せません。$/, replace: (name) => `Delete ${name}? This action cannot be undone.` },
  { regex: /^(.+)\sが「(.+)」を\s([0-9.]+)\s([A-Za-z]+)\sで購入しました$/, replace: (name, title, amount, token) => `${name} purchased "${title}" for ${amount} ${token}` },
  { regex: /^(.+)\sが「(.+)」に\s★([0-9.]+)\sのレビューを投稿しました$/, replace: (name, title, rating) => `${name} posted a ★${rating} review on "${title}"` },
  { regex: /^(.+)\sがあなたをフォローしました$/, replace: (name) => `${name} followed you` },
  { regex: /^(.+)\sが「(.+)」を出品しました$/, replace: (name, title) => `${name} listed "${title}"` },
  { regex: /^([0-9][0-9,]*(?:\.[0-9]+)?)\s([A-Za-z]+)\sで購入$/, replace: (amount, token) => `Buy for ${amount} ${token}` },
  { regex: /^認証APIへの接続に失敗しました:\s*(.+)$/, replace: (message) => `Failed to connect to auth API: ${message}` },
];

export function translateJaToEn(value: string): string {
  if (!value) return value;

  const exact = JA_TO_EN_EXACT[value];
  if (exact) return exact;

  for (const rule of PATTERN_RULES) {
    const match = value.match(rule.regex);
    if (match) {
      return rule.replace(...match.slice(1));
    }
  }

  const trimmed = value.trim();
  if (!trimmed) return value;

  const trimmedExact = JA_TO_EN_EXACT[trimmed];
  if (trimmedExact) {
    return value.replace(trimmed, trimmedExact);
  }

  return value;
}
